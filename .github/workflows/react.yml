name: CI/CD - react

on:
  push:
    branches:
      - react

jobs:
  build:
    name: Build, lint on ${{ matrix.os }}

    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest]

    steps:
      - name: â‡ï¸ Checkout repo
        uses: actions/checkout@v4

      - name: Set up Bun
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: latest

      - name: ğŸ“¥ Install dependencies with Bun (with cache)
        run: bun install --cwd packages/react

      # - name: ğŸ§ª Test
      #   run: bun test --ci --coverage --max-workers=2

      - name: ğŸ› ï¸ Build
        run: cd packages/react/ && bun run build

      - name: ğŸš€ Publish to npm
        uses: JS-DevTools/npm-publish@v1
        with:
          token: ${{ secrets.NPM_TOKEN }}
          package: packages/react/package.json
